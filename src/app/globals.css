@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   Lumière d’Arcachon — Design Tokens
   3 levels: Sources → Brand → UI tokens
   Light mode by default, Dark mode via html.dark
   ========================================================= */

:root {
  /* =========================================================
     COLOR SOURCES (raw palette)
     ========================================================= */
  --sand-100: #f4efe6; /* sable clair */
  --white-100: #ffffff; /* blanc */
  --ink-900: #1c1c1c; /* noir doux (texte) */
  --gold-500: #d9b98c; /* or doux (accent) */
  --sea-600: #607d8b; /* bleu-gris océan (secondary) */

  --night-800: #263238; /* bleu profond premium (anchors) */
  --night-900: #0f1a20; /* nuit (dark background base) */

  --on-dark-100: #f2f2f2; /* texte sur fond sombre */
  --danger-600: #dc2626; /* erreurs */

  --ui-white: #ffffff;

  /* =========================================================
     2) BRAND PALETTE (semantic brand mapping)
     ========================================================= */
  --brand-bg: var(--sand-100);
  --brand-surface: var(--white-100);
  --brand-text: var(--ink-900);
  --brand-accent: var(--gold-500);
  --brand-muted: var(--sea-600);

  /* Brand anchors (fixed identity, independent from theme) */
  --brand-strong: var(--night-800);
  --on-brand-strong: var(--on-dark-100);
  --on-brand-strong-soft: rgba(242, 242, 242, 0.85);

  /* =========================================================
     UI TOKENS (functional roles consumed by components)
     ========================================================= */

  /* Core */
  --color-bg: var(--brand-bg);
  --color-surface: var(--brand-surface);
  --color-surface-soft: color-mix(in oklab, var(--brand-surface) 75%, var(--brand-bg));
  --color-text: var(--brand-text);
  --color-heading: var(--brand-text);
  --color-muted: color-mix(in oklab, var(--brand-text) 55%, var(--brand-bg));

  /* Accents */
  --color-primary: var(--brand-accent);
  --color-secondary: var(--brand-muted);

  /* Borders & states */
  --color-border: color-mix(in oklab, var(--brand-text) 12%, white);
  --color-link: var(--color-secondary);
  --color-link-hover: var(--color-primary);
  --focus-ring: color-mix(in oklab, var(--color-primary) 55%, white);

  /* Header (signature always light) */
  --color-header-bg: rgba(255, 255, 255, 0.85);
  --color-header-bg-blur: blur(8px);
  --color-header-text: var(--ink-900);
  --color-header-hover: var(--brand-muted);
  --color-header-active: var(--brand-accent);
  --color-header-border: rgba(0, 0, 0, 0.08);
  --color-header-icon: var(--ink-900);
  --color-header-mobile-hover: rgba(0, 0, 0, 0.04);

  /* Footer / CTA / Heroes (brand anchors) */
  --color-footer-bg: var(--brand-strong);
  --color-footer-text: var(--on-brand-strong);
  --color-footer-link-hover: color-mix(in oklab, var(--color-primary) 70%, white);
  --color-footer-border: rgba(255, 255, 255, 0.12);
  --color-footer-icon: var(--on-brand-strong);
  --color-footer-icon-hover: #ffffff;

  --color-cta-bg: var(--brand-strong);
  --color-cta-fg: var(--on-brand-strong);

  --color-hero-bg: var(--brand-strong);
  --color-hero-fg: var(--on-brand-strong);
  --color-hero-subtitle: var(--on-brand-strong-soft);

  --color-home-hero-bg: var(--brand-strong);
  --color-home-hero-fg: var(--on-brand-strong);
  --color-home-hero-subtitle: rgba(242, 242, 242, 0.8);

  /* Typography tokens */
  --color-section-title: var(--color-heading);
  --color-subtitle: color-mix(in oklab, var(--color-heading) 80%, var(--color-secondary));
  --color-eyebrow: var(--color-secondary);

  /* Buttons */
  --btn-primary-bg: var(--color-primary);
  --btn-primary-text: var(--night-900); /* contraste élégant sur doré */
  --btn-primary-border: color-mix(in oklab, var(--color-primary) 75%, black);
  --btn-primary-hover-bg: color-mix(in oklab, var(--color-primary) 88%, white);
  --btn-primary-hover-text: var(--night-900);
  --btn-primary-hover-border: color-mix(in oklab, var(--color-primary) 70%, black);
  --btn-primary-focus-ring: var(--focus-ring);

  --btn-secondary-bg: var(--color-secondary);
  --btn-secondary-text: var(--ui-white);
  --btn-secondary-border: color-mix(in oklab, var(--color-secondary) 80%, black);
  --btn-secondary-hover-bg: color-mix(in oklab, var(--color-secondary) 88%, white);
  --btn-secondary-hover-text: var(--ui-white);
  --btn-secondary-hover-border: color-mix(in oklab, var(--color-secondary) 70%, black);
  --btn-secondary-focus-ring: var(--focus-ring);

  /* GlassLight */
  --btn-glasslight-bg: rgba(255, 255, 255, 0.12);
  --btn-glasslight-text: var(--ui-white);
  --btn-glasslight-border: rgba(255, 255, 255, 0.28);
  --btn-glasslight-hover-bg: rgba(255, 255, 255, 0.2);
  --btn-glasslight-hover-text: var(--ui-white);
  --btn-glasslight-hover-border: rgba(255, 255, 255, 0.38);
  --btn-glasslight-focus-ring: rgba(255, 255, 255, 0.45);

  /* Layout */
  --header-height: 56px;

  /* Cards */
  --card-radius: 0.75rem;
  --card-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
  --card-shadow-hover: 0 10px 28px rgba(0, 0, 0, 0.08);

  --card-bg: var(--color-surface);
  --card-border: color-mix(in oklab, var(--brand-text) 12%, white);
  --card-text: var(--color-text);
  --card-title: var(--color-section-title);
  --card-muted-opacity: 0.78;

  --card-header-bg: color-mix(in oklab, var(--color-secondary) 70%, var(--color-footer-bg));
  --card-header-fg: var(--ui-white);

  --card-outlined-bg: var(--color-surface);
  --card-outlined-border: color-mix(in oklab, var(--color-primary) 55%, var(--brand-text));

  --card-gradient-fg: var(--ui-white);
  --card-gradient-start: color-mix(in oklab, var(--color-secondary) 75%, var(--color-footer-bg));
  --card-gradient-end: var(--color-footer-bg);

  --card-icon-size: 2.5rem;
  --card-icon-fg: var(--color-secondary);

  /* Mobile menu (always light) */
  --color-mobilemenu-bg: rgba(255, 255, 255, 0.85);
  --color-mobilemenu-text: var(--ink-900);
  --color-mobilemenu-hover: rgba(0, 0, 0, 0.04);
  --color-mobilemenu-active-bg: rgba(0, 0, 0, 0.06);
  --color-mobilemenu-active-text: var(--ink-900);

  /* Contact / Forms */
  --color-contact-bg: var(--color-bg);

  --color-form-bg: var(--color-surface);
  --color-form-text: var(--color-text);
  --color-form-muted: var(--color-muted);
  --color-form-border: var(--color-border);

  --color-form-aside-bg: var(--color-surface);
  --color-form-aside-text: var(--color-text);
  --color-form-aside-muted: var(--color-muted);

  /* Inputs — shared colors */
  --color-input-bg: var(--color-surface);
  --color-input-text: var(--color-text);
  --color-input-border: var(--color-border);

  --color-input-label: var(--color-muted);
  --color-input-label-focus: var(--color-primary);

  --color-input-border-hover: color-mix(in oklab, var(--color-border), var(--color-text) 20%);
  --color-input-border-focus: var(--color-primary);
  --color-input-focus-ring: color-mix(in oklab, var(--color-primary), white 85%);

  --color-input-bg-disabled: color-mix(in oklab, var(--color-surface), var(--color-border) 20%);
  --color-input-text-disabled: color-mix(in oklab, var(--color-text), var(--color-muted) 30%);

  --color-input-help: var(--color-muted);

  --color-input-error: var(--danger-600);
  --color-input-error-ring: color-mix(in oklab, var(--color-input-error), white 85%);

  /* FileUpload (input-like) */
  --color-input-border-hover-strong: color-mix(
    in oklab,
    var(--color-input-border),
    var(--color-primary) 40%
  );
  --color-input-help-strong: color-mix(in oklab, var(--color-input-help), black 20%);
  --color-input-error-strong: #b91c1c; /* rouge-700 (message d'erreur) */

  /* =========================
   Overlay / Modal
   ========================= */

  --color-overlay-bg: rgba(15, 26, 32, 0.55); /* light mode */

  /* Aliases */
  --background: var(--color-bg);
  --foreground: var(--color-text);
}

/* ===== Dark mode overrides (minimal) ===== */
html.dark {
  /* Only swap the sources that define the “reading context” */
  --brand-bg: var(--night-900);
  --brand-surface: #111c23; /* slightly lifted surface */
  --brand-text: var(--on-dark-100);
  --brand-muted: #c8d0d6;

  /* Remap core roles */
  --color-bg: var(--brand-bg);
  --color-surface: var(--brand-surface);
  --color-text: var(--brand-text);
  --color-heading: var(--brand-text);
  --color-muted: var(--brand-muted);

  --color-border: rgba(255, 255, 255, 0.12);
  --focus-ring: color-mix(in oklab, var(--brand-accent) 55%, transparent);

  --color-overlay-bg: rgba(0, 0, 0, 0.65);

  --background: var(--color-bg);
  --foreground: var(--color-text);
}

@media (min-width: 640px) {
  :root {
    --header-height: 64px;
  }
}

@media (min-width: 1024px) {
  :root {
    --header-height: 80px;
  }
}

/* Reset */
* {
  box-sizing: border-box;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  font-family: system-ui, sans-serif;
  background: var(--background);
  color: var(--foreground);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
